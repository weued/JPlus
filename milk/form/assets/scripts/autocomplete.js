/** * @author  */using("Controls.Core.IDropDownMenuContainer");using("Controls.Form.ListBox");var AutoComplete = Control.extend({		xType: 'autocomplete',		onKeyDown: function(e){		switch(e.keyCode) {			case 40:			case 38:				this.showDropDownMenu();				this.dropDownMenu.selectNext(e.keyCode === 40);			    e.preventDefault();			    return;			case 13:			case 10:				var currentIndex = this.dropDownMenu.getSelectedIndex();				if(currentIndex != -1) {					this.onSelectItem(this.controls[currentIndex]);					e.preventDefault();				}		}	},		getSuggestItems: function(text){		if(!this._values){			this._values = this.controls.invoke('getText', []);		}				text = text.toLowerCase();		return this._values.filter(function(value){			return value.toLowerCase().indexOf(text) >= 0;		});	},		showSuggest: function(){		var text = this.getText();		var items = this.getSuggestItems(text);				if(!items || !items.length || (items.length === 1 && items[0] === text))  {			return this.hideDropDownMenu();		}				this.items.set(items);				this.showDropDownMenu();		this.dropDownMenu.selectedItem = null;		this.dropDownMenu.setSelectedIndex(0);	},		onKeyUp: function(e){		switch(e.keyCode) {			case 40:			case 38:			case 13:			case 36:			case 37:			    return;		}						this.showSuggest();	},		onSelectItem: function(item){		this.setText(item.getText());		this.hideDropDownMenu();		return false;	},		init: function(options){				var suggest = new ListBox();				suggest.bindSelector('mouseover');				suggest.on('itemclick', this.onSelectItem, this);				suggest.on('mousedown', function(e){			e.preventDefault();			this._dropDownMenuDown = true;		}, this);				suggest.on('mouseup', function(){			this._dropDownMenuDown = false;		}, this);				this.setDropDownMenu(suggest);				this.items = this.controls = suggest.controls;				this.on('keydown', this.onKeyDown);				if(navigator.isIE6) {			this.on('keypress', this.onKeyDown);		}				this.on('focus', this.showSuggest);				this.on('keyup', this.onKeyUp);				this.on('blur', function (e) {			var me = this;			if(this._dropDownMenuDown)				return;			this.hideDropDownMenu();			this._dropDownMenuDown = false;		});				this.setAttr('autocomplete', 'off');	}	}).implement(IDropDownMenuContainer);// AutoComplete.SuggestListBox = ListBox.extend({
// 	
	// xType: 'suggest'
// 	
// });