<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>微型模版引擎</title>
<style>
.x-button {
    -moz-border-bottom-colors: none;
    -moz-border-image: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #F5F5F5;
    background-image: -moz-linear-gradient(center top , #FFFFFF, #E6E6E6);
    background-repeat: repeat-x;
    border-color: #CCCCCC #CCCCCC #B3B3B3;
    border-radius: 4px 4px 4px 4px;
    border-style: solid;
    border-width: 1px;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.2) inset, 0 1px 2px rgba(0, 0, 0, 0.05);
    color: #333333;
    display: inline-block;
    font-size: 13px;
    line-height: 18px;
    padding: 4px 10px;
    text-align: center;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
    vertical-align: middle;
}
.x-button:hover, .x-button:active, .x-button.x-button-actived, .x-button.x-button-disabled, .x-button[disabled] {
    background-color: #E6E6E6;
}
.x-button:active, .x-button.x-button-actived {
}
.x-button:first-child {
}
.x-button:hover {
    -moz-transition: background-position 0.1s linear 0s;
    background-color: #E6E6E6;
    background-position: 0 -15px;
    color: #333333;
    text-decoration: none;
}
a.x-button {
    cursor: pointer;
}
button.x-button:focus, input.x-button:focus {
    outline: thin dotted;
}
.x-button:focus {
    outline-offset: -2px;
}
.x-button:active, .x-button-actived {
    background-color: #E6E6E6;
    background-image: none;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15) inset, 0 1px 2px rgba(0, 0, 0, 0.05);
    outline: 0 none;
}
.x-button[disabled], .x-button-disabled {
    background-color: #E6E6E6;
    background-image: none;
    box-shadow: none;
    cursor: default;
    opacity: 0.65;
}
.x-button-large {
    border-radius: 5px 5px 5px 5px;
    font-size: 14px;
    padding: 9px 14px;
}
.x-button-small {
    font-size: 10px;
    padding: 2px 9px;
}
.x-button-smallest {
    font-size: 10px;
    line-height: 14px;
    padding: 1px 6px;
}
.x-button-highlight, .x-button-highlight:hover, .x-button-warning, .x-button-warning:hover, .x-button-error, .x-button-error:hover, .x-button-success, .x-button-success:hover, .x-button-info, .x-button-info:hover, .x-button-inverse, .x-button-inverse:hover {
    color: #FFFFFF;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
}
.x-button-highlight {
    background-color: #4A9BCA;
    background-image: -moz-linear-gradient(center top , #4AACCA, #4A81CA);
    background-repeat: repeat-x;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
.x-button-highlight:hover, .x-button-highlight:active, .x-button-highlight.x-button-actived, .x-button-highlight.x-button-disabled, .x-button-highlight[disabled] {
    background-color: #4A81CA;
}
.x-button-highlight:active, .x-button-highlight.x-button-actived {
}
.x-button-warning {
    background-color: #FAA732;
    background-image: -moz-linear-gradient(center top , #FBB450, #F89406);
    background-repeat: repeat-x;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
.x-button-warning:hover, .x-button-warning:active, .x-button-warning.x-button-actived, .x-button-warning.x-button-disabled, .x-button-warning[disabled] {
    background-color: #F89406;
}
.x-button-warning:active, .x-button-warning.x-button-actived {
}
.x-button-error {
    background-color: #DA4F49;
    background-image: -moz-linear-gradient(center top , #EE5F5B, #BD362F);
    background-repeat: repeat-x;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
.x-button-error:hover, .x-button-error:active, .x-button-error.x-button-actived, .x-button-error.x-button-disabled, .x-button-error[disabled] {
    background-color: #BD362F;
}
.x-button-error:active, .x-button-error.x-button-actived {
}
.x-button-success {
    background-color: #5BB75B;
    background-image: -moz-linear-gradient(center top , #62C462, #51A351);
    background-repeat: repeat-x;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
.x-button-success:hover, .x-button-success:active, .x-button-success.x-button-actived, .x-button-success.x-button-disabled, .x-button-success[disabled] {
    background-color: #51A351;
}
.x-button-success:active, .x-button-success.x-button-actived {
}
.x-button-info {
    background-color: #49AFCD;
    background-image: -moz-linear-gradient(center top , #5BC0DE, #2F96B4);
    background-repeat: repeat-x;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
.x-button-info:hover, .x-button-info:active, .x-button-info.x-button-actived, .x-button-info.x-button-disabled, .x-button-info[disabled] {
    background-color: #2F96B4;
}
.x-button-info:active, .x-button-info.x-button-actived {
}
.x-button-inverse {
    background-color: #393939;
    background-image: -moz-linear-gradient(center top , #454545, #262626);
    background-repeat: repeat-x;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
.x-button-inverse:hover, .x-button-inverse:active, .x-button-inverse.x-button-actived, .x-button-inverse.x-button-disabled, .x-button-inverse[disabled] {
    background-color: #262626;
}
.x-button-inverse:active, .x-button-inverse.x-button-actived {
}
button.x-button, input.x-button {
}
button.x-button-large, input.x-button-large {
}
button.x-button-small, input.x-button-small {
}
.x-button-plain {
    background: none repeat scroll 0 0 transparent;
    border-color: transparent;
    box-shadow: none;
}
.x-button-fixed {
    padding-left: 20px;
    padding-right: 20px;
}

</style>
<link href="http://ybole.com/static/css/common/global_common.css" type="text/css" rel="stylesheet" />
<script src="http://a.tbcdn.cn/s/kissy/1.2.0/kissy-min.js"></script>
<script src="js/template.js"></script>
</head>
<body>
模版
<textarea style="width:100%; height:300px;">
<@for(var i=0,len=data.content.length;i<len;i++){ @> 
      <li id="tweet_<@=data.content[i].id@>"> 
            <div class="tweet-user-face"> 
              <a target="_blank" href="http://weibo.com/n/<@=data.content[i].user.nickname@>" wb_screen_name="<@=data.content[i].user.nickname@>"> 
                  <img src="<@=data.content[i].user.face@>" /> 
              </a> 
            </div> 
            <div class="tweet-content"> 
               <div class="tweet-content-detail"> 
                   <p> <a target="_blank" href="http://weibo.com/n/<@=data.content[i].user.nickname@>" id="user_<@=data.content[i].id@>" wb_screen_name=<@=data.content[i].user.nickname@>><@=data.content[i].user.nickname@></a><@if(data.content[i].user.verified){@>
                   <img class="approve_co approve_<@=data.content[i].user.verified_type||0@>" alt="<@=data.content[i].user.verified_reason@>" title="<@=data.content[i].user.verified_reason@>" src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif"><@ } @>: <i style="font-style:normal;"><@=data.content[i].content@></i> </p> 
                   <@ if(data.content[i].thumbnail){ @> 
                      <a class="tweet-thumbnail" href="javascript:void(0)"> <img id="image<@=data.content[i].id@>" src="<@=data.content[i].thumbnail@>" data-action="showThumbnail" data-param="<@=data.content[i].origpic@>"> </a>
                   <@ } @> 
                </div> 
                <div class="tweet-user-actions"> 
                <div class="left"> 
                   <span class="time" ><a href="/tweet/<@=data.content[i].id@>" class="tweet-time" data-time="<@=data.content[i].origin_time@>" target="_blank" title="查看详情"><@=data.content[i].time@></a></span> 
                   <span class="source">来自<@=data.content[i].source@></span> </div> <div class="right"> <@ if(data.content[i].applied){@> 
                   <span class="applyed"> <a href="javascript:void(0)" onclick="Ybole.jobAction.apply(this,<@=data.content[i].id@>,event)">已申请(<@=data.content[i].apply_count@>)</a> </span> <@ }else{@> 
                   <span class="apply"><a href="javascript:void(0)" data-action="apply" data-param="<@=data.content[i].id@>">申请(<@=data.content[i].apply_count@>)</a> </span> <@ } @> <@ if(data.content[i].favorited){@> 
                   <span class="favored"> <a href="javascript:void(0)" data-action="favor" data-param="<@=data.content[i].id@>" >已收藏(<@=data.content[i].favorite_count@>)</a> </span> <@ }else{@> 
                   <span class="favor"> <a href="javascript:void(0)" data-action="favor" data-param="<@=data.content[i].id@>">收藏(<@=data.content[i].favorite_count@>)</a> </span> <@ } @> 
                   </div> 
                  </div> 
                </div> 
               </li>
               <@} @>
</textarea>
    <a class="x-button x-button-highlight" id="run">
    运行
    </a>
<div class="tweet-list">
  <ul id="tweet_Ul_List"></ul>
</div>
<script type="tpl" id="tpl">
<@for(var i=0,len=data.content.length;i<len;i++){ @> <li id="tweet_<@=data.content[i].id@>" <@if(KISSY.UA.ie&&KISSY.UA.ie==6){@> onMouseOver="javascript:$(this).addClass('hover')" onMouseOut="javascript:$(this).removeClass('hover')" <@ } @> > <div class="tweet-user-face"> <a target="_blank" href="http://weibo.com/n/<@=data.content[i].user.nickname@>" wb_screen_name="<@=data.content[i].user.nickname@>"> <img src="<@=data.content[i].user.face@>" /> </a> </div> <div class="tweet-content"> <div class="tweet-content-detail"> <p> <a target="_blank" href="http://weibo.com/n/<@=data.content[i].user.nickname@>" id=user_<@=data.content[i].id@> wb_screen_name=<@=data.content[i].user.nickname@>><@=data.content[i].user.nickname@></a><@if(data.content[i].user.verified){@><img class="approve_co approve_<@=data.content[i].user.verified_type||0@>" alt="<@=data.content[i].user.verified_reason@>" title="<@=data.content[i].user.verified_reason@>" src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif"><@ } @>: <i style="font-style:normal;"><@=data.content[i].content@></i> </p> <@ if(data.content[i].thumbnail){ @> <a class="tweet-thumbnail" href="javascript:void(0)"> <img id="image<@=data.content[i].id@>" src="<@=data.content[i].thumbnail@>" data-action="showThumbnail" data-param="<@=data.content[i].origpic@>"> </a><@ } @> </div> <div class="tweet-user-actions"> <div class="left"> <span class="time" ><a href="/tweet/<@=data.content[i].id@>" class="tweet-time" data-time="<@=data.content[i].origin_time@>" target="_blank" title="查看详情"><@=data.content[i].time@></a></span> <span class="source">来自<@=data.content[i].source@></span> </div> <div class="right"> <@ if(data.content[i].applied){@> <span class="applyed"> <a href="javascript:void(0)" onclick="Ybole.jobAction.apply(this,<@=data.content[i].id@>,event)">已申请(<@=data.content[i].apply_count@>)</a> </span> <@ }else{@> <span class="apply"><a href="javascript:void(0)" data-action="apply" data-param="<@=data.content[i].id@>">申请(<@=data.content[i].apply_count@>)</a> </span> <@ } @> <@ if(data.content[i].favorited){@> <span class="favored"> <a href="javascript:void(0)" data-action="favor" data-param="<@=data.content[i].id@>" >已收藏(<@=data.content[i].favorite_count@>)</a> </span> <@ }else{@> <span class="favor"> <a href="javascript:void(0)" data-action="favor" data-param="<@=data.content[i].id@>">收藏(<@=data.content[i].favorite_count@>)</a> </span> <@ } @> </div> </div> </div> </li> <@} @>"
</script>
<script>
var $=KISSY.Node.all;
$("#run").on('click',function(){
	KISSY.ajax.get('tweets.json',function(data){
	if(!KISSY.isObject(data)){
	   data=eval('('+data+')');
	}
  	$("#tweet_Ul_List").html(Template({
	 tpl:$("#tpl")[0].text,
	 left:'<@',
	 right:'@>',
	 data:data
    }).render());
})
	
});

</script>
</body>
</html>
